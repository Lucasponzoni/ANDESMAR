<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Subir CPs a Firebase</title>
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
</head>
<body>
  <h2>Subiendo códigos postales a Firebase...</h2>

  <script>
    // Configuración de Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyBMFvhw6_7Ik9JBdEkUaTsRaKxqZyhTxIM",
      authDomain: "logisticas-novogar.firebaseapp.com",
      databaseURL: "https://logisticas-novogar-default-rtdb.firebaseio.com",
      projectId: "logisticas-novogar",
      storageBucket: "logisticas-novogar.firebasestorage.app",
      messagingSenderId: "586666149655",
      appId: "1:586666149655:web:e0501d1e6c6e0f6c451952",
      measurementId: "G-B2BCF934YJ"
    };

    // Inicializar Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // Array de códigos postales
    const cpsCDS = [
    8300,
    8302,
    8304,
    8303,
    2124,
    2105,
    2918,
    2920,
    2103,
    2215,
    3017,
    2132,
    2101,
    2107,
    2130,
    2128,
    2126,
    2127,
    2152,
    2143,
    2000,
    2121,
    2129,
    2001,
    2002,
    2003,
    2004,
    2005,
    2006,
    2007,
    2008,
    2009,
    2010,
    2011,
    2012,
    2013,
    2108,
    2125,
    2206,
    2216,
    2209,
    2156,
    2154,
    2202,
    2204,
    2200,
    2201,
    2134,
    2527];

    // Eliminar todo en LogCDS y luego subir
    db.ref('CamionRosario').remove()
      .then(() => {
        const updates = {};
        const uniqueCps = [...new Set(cpsCDS)]; // Eliminar duplicados
        uniqueCps.forEach(cp => {
          updates[cp] = { cp: cp };
        });
        return db.ref('CamionRosario').update(updates);
      })
      .then(() => {
        console.log("✅ Códigos postales subidos correctamente.");
        document.body.innerHTML += "<p style='color:green;'>✅ ¡Carga completada correctamente!</p>";
      })
      .catch(error => {
        console.error("❌ Error al subir códigos postales:", error);
        document.body.innerHTML += "<p style='color:red;'>❌ Error al subir los datos.</p>";
      });
  </script>
</body>
</html>
